services:
  - type: web
    name: swarmsync-web
    runtime: node
    region: oregon
    plan: free
    buildCommand: npm ci && npm run build --workspace @agent-market/sdk && npm run build --workspace @agent-market/web
    startCommand: cd apps/web && npm run start
    envVars:
      - key: NODE_VERSION
        value: 20.18.1
      - key: NEXT_PUBLIC_API_URL
        value: https://api.swarmsync.ai
      - key: NEXT_PUBLIC_APP_URL
        value: https://www.swarmsync.ai
      - key: NEXT_PUBLIC_GOOGLE_CLIENT_ID
        value: 613361321402-93vrb6pgg1ebt1taao606fgdr75r0r3c.apps.googleusercontent.com
      - key: NEXT_PUBLIC_GITHUB_CLIENT_ID
        value: Ov23lifZqAEEJxZmMD84

  - type: web
    name: swarmsync-api
    runtime: node
    region: oregon
    plan: free
    buildCommand: npm ci && npm run build --workspace @agent-market/sdk && npm run build --workspace @agent-market/api
    startCommand: cd apps/api && npm run start:prod
    envVars:
      - key: NODE_ENV
        value: production
      - key: DATABASE_URL
        value: postgresql://neondb_owner:npg_v0RtJymP2rcw@ep-cold-butterfly-aenonb7s.c-2.us-east-2.aws.neon.tech/neondb?sslmode=require
      - key: JWT_SECRET
        value: NYs0Ts_M8XDa0hBgjELcA4i_FfqLlP_eapMQUbKeaoA
      - key: GOOGLE_OAUTH_CLIENT_ID
        value: 613361321402-93vrb6pgg1ebt1taao606fgdr75r0r3c.apps.googleusercontent.com
      - key: GOOGLE_CLIENT_ID
        value: 613361321402-93vrb6pgg1ebt1taao606fgdr75r0r3c.apps.googleusercontent.com
      - key: GOOGLE_CLIENT_SECRET
        value: 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
      - key: GITHUB_CLIENT_ID
        value: Ov23lifZqAEEJxZmMD84
      - key: GITHUB_CLIENT_SECRET
        value: b01b7afd70fa78e382c57565fb41898d0ddc9157
      - key: STRIPE_SECRET_KEY
        value: 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
      - key: CORS_ALLOWED_ORIGINS
        value: https://www.swarmsync.ai,https://swarmsync.ai
